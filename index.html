<!DOCTYPE html>
<html lang="en">

<head>
    <title>Frankrx41's Blog</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="/src/normalize.css">
    <link rel="stylesheet" type="text/css" href="/src/main.css">
    <link rel="stylesheet" href="/src/highlight/vs2015.min.css">
    <script src="/src/highlight/highlight.min.js"></script>
</head>

<body>
    <header>
        <h1>Frankrx41's blog</h1>
        <p><nobr>Technology and Art</nobr></p>
    </header>

    <nav>
        <ul>
            <li><a href="/">Home</a></li>
            <!-- <li><a href="">Contact</a></li> -->
        </ul>
    </nav>

    <article>
        <p>Loading...</p>
    </article>

    <script>
        // URL: ? blog-title-name & other-key=value
        const params = new URLSearchParams(location.search);
        load_page = [...params][0];
        // Remove last char ','
        load_page = load_page != undefined ? load_page.slice(0, -1) + "/" : "";
        article = document.getElementsByTagName('article')[0];

        fetch('/archive/' + load_page + 'index.txt')
            .then(response => {
                if (response.ok) {
                    return response.text().then(response_text => {
                        article.innerHTML = response_text;
                        // highlight.js
                        article.querySelectorAll('pre code').forEach(hljs.highlightElement);
                        // add line number
                        article.querySelectorAll('pre code').forEach((pre_code_html) => {
                            pre_code_text = "";
                            pre_code_html_split = pre_code_html.innerHTML.split("\n");
                            pre_code_html_split.filter((x,i)=>i!=pre_code_html_split.length-1).forEach((pre_code_line, line) => {
                                pre_code_text += '<span class="cl"></span>' + pre_code_line +'\n'
                            })
                            pre_code_html.innerHTML = pre_code_text;
                        });

                    })
                }
                else {
                    article.innerHTML = `<p><b>404:</b> Page <i>${load_page.slice(0, -1)}</i> not exist!</p>`;
                }
            })

    </script>

    <footer><i>frankrx41 2022</i></footer>
</body>

</html>